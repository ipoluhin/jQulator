"use strict";const vars={input:0,buffer:0,result:0,operationID:0,numAfterDot:3,memory:"empty",date:new Date},buttonsBase={themes:[{text:"Сажа",class:"theme-active",id:"theme-1"},{text:"Неон",class:"theme",id:"theme-2"},{text:"Апельсин",class:"theme",id:"theme-3"},{text:"Небо",class:"theme",id:"theme-4"}],round:[{text:"F",class:"btn round-vol",id:"normal"},{text:".00",class:"btn round-vol",id:"ml"},{text:".000",class:"btn round-vol round-vol-active",id:"mk"}],memory:[{text:"MS",class:"btn memory",id:"ms"},{text:"MR",class:"btn memory",id:"mr"},{text:"MC",class:"btn memory",id:"mc"}],exponentiation:[{text:"&#8730x",class:"btn sqrt",id:"sqrt"}],digits:[{text:"1",class:"btn number",id:1},{text:"2",class:"btn number",id:2},{text:"3",class:"btn number",id:3},{text:"4",class:"btn number",id:4},{text:"5",class:"btn number",id:5},{text:"6",class:"btn number",id:6},{text:"7",class:"btn number",id:7},{text:"8",class:"btn number",id:8},{text:"9",class:"btn number",id:9},{text:"0",class:"btn number",id:0},{text:".",class:"btn number",id:"dot"},{text:"=",class:"btn number",id:"eql"}],function:[{text:"Rand",class:"btn random",id:"random"},{text:"/",class:"btn function",id:"division"},{text:"*",class:"btn function",id:"multiply"},{text:"-",class:"btn function",id:"substruction"},{text:"+",class:"btn function",id:"sum"},{text:"C",class:"btn function erase",id:"btn-erase"},{text:"AC",class:"btn function reset",id:"btn-reset"}]},htmlRender={themesRender:function(){for(let t=0;t<buttonsBase.themes.length;t++)$(".themes").html($(".themes").html()+`<button class="${buttonsBase.themes[t].class}" id="${buttonsBase.themes[t].id}">${buttonsBase.themes[t].text}</button>`)},roundRender:function(){for(let t=0;t<buttonsBase.round.length;t++)$(".round-function").html($(".round-function").html()+`<button button type = "button" class= "${buttonsBase.round[t].class}" id = "${buttonsBase.round[t].id}" >\n            <span class="round-text">${buttonsBase.round[t].text}</span></button > `)},memoryRender:function(){for(let t=0;t<buttonsBase.memory.length;t++)$(".memory-function").html($(".memory-function").html()+`<button type="button" class="${buttonsBase.memory[t].class}" id = "${buttonsBase.memory[t].id}">\n            <span class="memory-text">${buttonsBase.memory[t].text}</span>`)},exponentiationRender:function(){for(let t=0;t<buttonsBase.exponentiation.length;t++)$(".exponentiation").html($(".exponentiation").html()+`\n            <button type="button" class="${buttonsBase.exponentiation[t].class}" id = "${buttonsBase.exponentiation[t].id}">\n            <span class="sqrt-text">${buttonsBase.exponentiation[t].text}</span></button>`)},digitRender:function(){for(let t=0;t<buttonsBase.digits.length;t++)$(".number-block").html($(".number-block").html()+`\n            <button type = "button" class= "${buttonsBase.digits[t].class}" id = "${buttonsBase.digits[t].id}" >\n            <span class="num-text">${buttonsBase.digits[t].text}</span>`)},functionRender:function(){for(let t=0;t<buttonsBase.function.length;t++)$(".func-block").html($(".func-block").html()+`\n            <button\ttype="button" class="${buttonsBase.function[t].class}" id="${buttonsBase.function[t].id}">\n            ${buttonsBase.function[t].text}</button>`)}},themesPanel={one:function(){$(".theme-active").removeClass("theme-active").addClass("theme"),$("#theme-1").removeClass("theme").addClass("theme-active"),themesPanel.clearTheme()},two:function(){$(".theme-active").removeClass("theme-active").addClass("theme"),$("#theme-2").removeClass("theme").addClass("theme-active"),themesPanel.clearTheme(),$(".calc-body-theme-1").removeClass("calc-body-theme-1").addClass("calc-body-theme-2")},three:function(){$(".theme-active").removeClass("theme-active").addClass("theme"),$("#theme-3").removeClass("theme").addClass("theme-active"),themesPanel.clearTheme(),$(".calc-body-theme-1").removeClass("calc-body-theme-1").addClass("calc-body-theme-3")},four:function(){$(".theme-active").removeClass("theme-active").addClass("theme"),$("#theme-4").removeClass("theme").addClass("theme-active"),themesPanel.clearTheme(),$(".calc-body-theme-1").removeClass("calc-body-theme-1").addClass("calc-body-theme-4")},clearTheme:function(){$("#calc-body").removeClass("calc-body-theme-2").removeClass("calc-body-theme-3").removeClass("calc-body-theme-4").addClass("calc-body-theme-1")}},round={toNormal:function(){let t=vars.numAfterDot;vars.numAfterDot=6,vars.numAfterDot!==t&&($(".round-vol-active").removeClass("round-vol-active"),$("#normal").addClass("round-vol-active"),Number.isInteger(vars.result)?$("#result-text").text("").text(vars.result):($("#result-text").text("").text((+vars.result).toFixed(vars.numAfterDot)),$("#input-text").text("")))},toMilli:function(){let t=vars.numAfterDot;vars.numAfterDot=2,vars.numAfterDot!==t&&($(".round-vol-active").removeClass("round-vol-active"),$("#ml").addClass("round-vol-active"),Number.isInteger(vars.result)?$("#result-text").text("").text(vars.result):($("#result-text").text("").text((+vars.result).toFixed(vars.numAfterDot)),$("#input-text").text("")))},toMickro:function(){let t=vars.numAfterDot;vars.numAfterDot=3,vars.numAfterDot!==t&&($(".round-vol-active").removeClass("round-vol-active"),$("#mk").addClass("round-vol-active"),Number.isInteger(vars.result)?$("#result-text").text("").text(vars.result):($("#result-text").text("").text((+vars.result).toFixed(vars.numAfterDot)),$("#input-text").text("")))}},memory={ms:function(){0!==vars.result?(vars.memory=0,vars.memory=vars.result.toString(),$("#input-text").text("")):(vars.memory="empty",vars.memory=vars.input.toString(),$("#input-text").text("")),$("#result-text").html('<span style="color: blue; font-size: 16px">saved</span>'),setTimeout(()=>{$("#result-text").text("")},1500)},mr:function(){0==+vars.memory||"empty"===+vars.memory?($("#result-text").html('<span style="color: blue; font-size: 16px">empty slot</span>'),setTimeout(()=>{$("#result-text").text("")},1500)):(vars.input=+vars.memory,$("#input-text").text(+vars.input))},mc:function(){vars.memory=0,$("#input-text").text(""),$("#result-text").html('<span style="color: blue; font-size: 16px">cleared</span>'),setTimeout(()=>{$("#result-text").text("")},1500)}},exponentiation={sqrt:function(){3===vars.operationID?(vars.input<0&&(vars.input=-1*vars.input),vars.input=-1*Math.sqrt(+vars.input)):(vars.input<0&&(vars.input=-1*vars.input),vars.input=Math.sqrt(+vars.input)),Number.isInteger(+vars.input)?$("#input-text").text("").text(vars.input):$("#input-text").text("").text((+vars.input).toFixed(vars.numAfterDot))}},numberPanel={one:function(){funcPanel.init(1)},two:function(){funcPanel.init(2)},three:function(){funcPanel.init(3)},four:function(){funcPanel.init(4)},five:function(){funcPanel.init(5)},six:function(){funcPanel.init(6)},seven:function(){funcPanel.init(7)},eigth:function(){funcPanel.init(8)},nine:function(){funcPanel.init(9)},zero:function(){funcPanel.init(0)},dot:function(t){Number.isInteger(+vars.input)?funcPanel.init("."):t.preventDefault()}},funcPanel={init:function(t){if(null!=t&&(vars.input=vars.input.toString(),vars.input.length<10))return vars.input+=t.toString(),void $("#input-text").text($("#input-text").text()+""+t)},random:function(){equalBlock.commonEqual(),vars.buffer=+vars.input,vars.input=(10*Math.random()).toFixed(0),console.log(vars.input),$("#input-text").text(vars.input)},division:function(){equalBlock.endOfEqually(),vars.operationID=1,$("#input-text").text().includes("/")?$("#input-text").text(""):$("#input-text").text("/")},multiply:function(){equalBlock.endOfEqually(),vars.operationID=2,$("#input-text").text().includes("*")?$("#input-text").text(""):$("#input-text").text("*")},substruction:function(){equalBlock.endOfEqually(),vars.operationID=3,$("#input-text").text().includes("-")?$("#input-text").text(""):$("#input-text").text("-")},summary:function(){equalBlock.endOfEqually(),vars.operationID=4,$("#input-text").text().includes("+")?$("#input-text").text(""):$("#input-text").text("+")},erase:function(){return $("#input-text").text(""),vars.input=0,vars.result},reset:function(){$("#input-text").text(""),$("#result-text").text("0"),vars.input=0,vars.buffer=0,vars.result=0,vars.operationID=0},checkResult:function(){Number.isInteger(vars.result)?($("#result-text").text("").text(vars.result),$("#input-text").text("")):($("#result-text").text("").text((+vars.result).toFixed(vars.numAfterDot)),$("#input-text").text("")),vars.result.toString().length<13?($("#result-text").text("").text(vars.result),$("#input-text").text("")):($("#result-text").text("").text((+vars.result).toFixed(vars.numAfterDot)),$("#input-text").text(""))}},equalBlock={commonEqual:function(){switch(vars.operationID){case 1:equalBlock.equalDiv();break;case 2:equalBlock.equalMult();break;case 3:equalBlock.equalSub();break;case 4:equalBlock.equalSum();break;default:if(0==+vars.input&&0===vars.buffer&&0===vars.result)return;if(0==+vars.input&&0===vars.buffer&&0!==vars.result)return void funcPanel.checkResult();if(0!=+vars.input&&0===vars.buffer&&0===vars.result)return vars.input=$("#input-text").text(),vars.buffer=+vars.input,vars.input=0,$("#input-text").text(""),void $("#result-text").text(vars.buffer);if(0!=vars.input&&0===vars.buffer&&0!==vars.result)return vars.input=$("#input-text").text(),vars.result=+vars.input,vars.input=0,void funcPanel.checkResult()}},equalDiv:function(){if(0!=+vars.input||0!==vars.buffer||0!==vars.result)return 0==+vars.input&&0==+vars.buffer&&0!==vars.result||0==+vars.input&&0!=+vars.buffer&&0===vars.result?"/"===$("#input-text").text()?(vars.result=+vars.buffer,vars.input=0,vars.buffer=0,$("#input-text").text(""),void funcPanel.checkResult()):(vars.input=+vars.input,errors.divByZero(),void(vars.input=0)):0!=+vars.input&&0==+vars.buffer&&0===vars.result?(vars.buffer=vars.input,vars.input=0,void $("#input-text").text(vars.buffer)):0!=+vars.input&&0!=+vars.buffer&&0===vars.result?(vars.result=+vars.buffer/+vars.input,vars.input=0,vars.buffer=0,funcPanel.checkResult(),void $("#input-text").text("")):0!=+vars.input&&0==+vars.buffer&&0!==vars.result?(vars.buffer=vars.result,vars.result=0,vars.result=+vars.buffer/+vars.input,vars.input=0,vars.buffer=0,funcPanel.checkResult(),void $("#input-text").text("")):void 0},equalMult:function(){if(0!=+vars.input||0!==vars.buffer||0!==vars.result)return 0==+vars.input&&0==+vars.buffer&&0!==vars.result?"*"===$("#input-text").text()?(vars.buffer=+vars.result,vars.input=0,vars.result=0,$("#input-text").text(""),void funcPanel.checkResult()):(vars.input=+vars.input,vars.result=+vars.buffer*+vars.input,vars.input=0,vars.buffer=0,$("#input-text").text(""),void funcPanel.checkResult()):0==+vars.input&&0!=+vars.buffer&&0===vars.result?"*"===$("#input-text").text()?(vars.result=+vars.buffer,vars.input=0,vars.buffer=0,$("#input-text").text(""),void funcPanel.checkResult()):(vars.input=+vars.input,vars.result=+vars.buffer*+vars.input,vars.input=0,vars.buffer=0,$("#input-text").text(""),void funcPanel.checkResult()):0!=+vars.input&&0==+vars.buffer&&0===vars.result?(vars.buffer=vars.input,vars.input=0,void $("#input-text").text(vars.buffer)):0!=+vars.input&&0!=+vars.buffer&&0===vars.result?(vars.result=+vars.buffer*+vars.input,vars.input=0,vars.buffer=0,funcPanel.checkResult(),void $("#input-text").text("")):0!=+vars.input&&0==+vars.buffer&&0!==vars.result?(vars.buffer=vars.result,vars.result=0,vars.result=+vars.buffer*+vars.input,vars.input=0,vars.buffer=0,funcPanel.checkResult(),void $("#input-text").text("")):void 0},equalSub:function(){if(0!=+vars.input||0!=+vars.buffer||0!==vars.result)return 0===vars.input&&0==+vars.buffer&&0!==vars.result?(vars.buffer=vars.result,vars.result=0,void $("#input-text").text(vars.buffer)):0==+vars.input&&0!=+vars.buffer&&0===vars.result?(vars.result=+vars.buffer+ +vars.input,vars.input=0,vars.buffer=0,$("#input-text").text(""),void funcPanel.checkResult()):0!=+vars.input&&0==+vars.buffer&&0===vars.result?(vars.input=$("#input-text").text(),vars.buffer=+vars.input,$("#result-text").text("").text(vars.buffer),$("#input-text").text(""),void(vars.input=0)):0!=+vars.input&&0==+vars.buffer&&0!==vars.result?(vars.input=$("#input-text").text(),vars.buffer=vars.result,vars.result=0,vars.result=+vars.buffer+ +vars.input,vars.input=0,vars.buffer=0,$("#input-text").text(""),void funcPanel.checkResult()):0!=+vars.input&&0!=+vars.buffer&&0===vars.result?(vars.input=$("#input-text").text(),vars.result=+vars.buffer+ +vars.input,vars.input=0,vars.buffer=0,$("#input-text").text(""),void funcPanel.checkResult()):void 0},equalSum:function(){if(0!=+vars.input||0!=+vars.buffer||0!==vars.result)return 0===vars.input&&0==+vars.buffer&&0!==vars.result?(vars.buffer=vars.result,vars.result=0,void $("#input-text").text(vars.buffer)):0==+vars.input&&0!=+vars.buffer&&0===vars.result?(vars.result=+vars.buffer+ +vars.input,vars.input=0,vars.buffer=0,void funcPanel.checkResult()):0!=+vars.input&&0==+vars.buffer&&0===vars.result?(vars.input=$("#input-text").text(),$("#result-text").text("").text(vars.buffer),$("#input-text").text(""),void(vars.input=0)):0!=+vars.input&&0==+vars.buffer&&0!==vars.result?(vars.input=$("#input-text").text(),vars.buffer=vars.result,vars.result=0,vars.result=+vars.buffer+ +vars.input,vars.input=0,vars.buffer=0,void funcPanel.checkResult()):0!=+vars.input&&0!=+vars.buffer&&0===vars.result?(vars.input=$("#input-text").text(),vars.result=+vars.buffer+ +vars.input,vars.input=0,vars.buffer=0,void funcPanel.checkResult()):void 0},endOfEqually:function(){equalBlock.commonEqual(),vars.operationID=0,$("#input-text").text("")}},errors={divByZero:function(){$("#result-text").html('<span style="color: red">ERROR!</span>'),$("#input-text").text("/"),setTimeout(()=>{$("#result-text").text(vars.result)},1500),clearInterval(divByZero())}};htmlRender.themesRender(),$("#theme-1").on("click",themesPanel.one),$("#theme-2").on("click",themesPanel.two),$("#theme-3").on("click",themesPanel.three),$("#theme-4").on("click",themesPanel.four),htmlRender.roundRender(),$("#normal").on("click",round.toNormal),$("#ml").on("click",round.toMilli),$("#mk").on("click",round.toMickro),htmlRender.memoryRender(),$("#ms").on("click",memory.ms),$("#mr").on("click",memory.mr),$("#mc").on("click",memory.mc),htmlRender.exponentiationRender(),$("#sqrt").on("click",exponentiation.sqrt),htmlRender.digitRender(),$("#1").on("click",numberPanel.one),$("#2").on("click",numberPanel.two),$("#3").on("click",numberPanel.three),$("#4").on("click",numberPanel.four),$("#5").on("click",numberPanel.five),$("#6").on("click",numberPanel.six),$("#7").on("click",numberPanel.seven),$("#8").on("click",numberPanel.eigth),$("#9").on("click",numberPanel.nine),$("#0").on("click",numberPanel.zero),$("#dot").on("click",numberPanel.dot),htmlRender.functionRender(),$("#random").on("click",funcPanel.random),$("#eql").on("click",equalBlock.endOfEqually),$("#division").on("click",funcPanel.division),$("#multiply").on("click",funcPanel.multiply),$("#substruction").on("click",funcPanel.substruction),$("#sum").on("click",funcPanel.summary),$("#btn-erase").on("click",funcPanel.erase),$("#btn-reset").on("click",funcPanel.reset),$("#result-text").text("0"),$(".year").text(vars.date.getFullYear());